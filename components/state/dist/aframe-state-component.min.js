!function(t){function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var s={};i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,s){"use strict";function e(t,i){var s,e,n=t;for(e=i.split("."),s=0;s<e.length;s++)n=n[e[s]];return e.length=0,n}function n(t){var i;for(i in t)delete t[i]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={initialState:{},handlers:{},computeState:function(){}};AFRAME.registerState=function(t){AFRAME.utils.extend(a,t)},AFRAME.registerSystem("state",{init:function(){this.diff={},this.lastState={},this.state=AFRAME.utils.clone(a.initialState),this.subscriptions=[],this.initEventHandlers()},dispatch:function(t,i){var s;for(AFRAME.utils.extendDeep(this.lastState,this.state),a.handlers[t](this.state,i),a.computeState(this.state),AFRAME.utils.diff(this.lastState,this.state,this.diff),s=0;s<this.subscriptions.length;s++)this.subscriptions[s](this.state,this.diff,t,i)},subscribe:function(t){this.subscriptions.push(t)},unsubscribe:function(t){this.subscriptions.splice(this.subscriptions.indexOf(t),1)},initEventHandlers:function(){function t(t){var i=this;this.el.addEventListener(t,function(s){i.dispatch(t,s.detail)})}var i,s=[];t=t.bind(this);for(i in a.handlers)actionNameClosure=i,-1===s.indexOf(i)&&(s.push(i),t(i))}}),AFRAME.registerComponent("bind",{schema:{default:{},parse:function(t){var i,s,e,n;if(t.constructor===Object)return t;if(-1===t.indexOf(":"))return t;for(i={},e=t.split(";"),s=0;s<e.length;s++)n=e[s].trim().split(":"),i[n[0]]=n[1];return i}},multiple:!0,init:function(){this.system=this.el.sceneEl.systems.state,this.keysToWatch=[],this.onStateUpdate=this.onStateUpdate.bind(this),this.isNamespacedBind=this.id&&this.id in AFRAME.components&&!AFRAME.components[this.id].isSingleProp||this.id in AFRAME.systems,this.lastData={},this.updateObj={},this.system.subscribe(this.onStateUpdate)},update:function(){var t,i,s,e=this.data;this.keysToWatch.length=0;for(i in e)s=i,t=e[i].indexOf("."),-1!==t&&(s=e[i].substring(0,e[i].indexOf("."))),this.keysToWatch.push(s)},onStateUpdate:function(t,i){var s,a,r,u,h=!1,c=!1,f=this.el;for(a in i)if(this.keysToWatch.indexOf(a)&&(h=!0),h)break;if(h){if(this.isNamespacedBind&&n(this.updateObj),"object"!==o(this.data)){if("object "!=typeof(u=e(t,this.data))&&"object"!==o(this.lastData)&&this.lastData===u)return;return AFRAME.utils.entity.setComponentProperty(f,this.id,u),void(this.lastData=u)}for(s in this.data)if(r=this.data[s].trim(),u=e(t,r),"object"===(void 0===u?"undefined":o(u))||"object"===o(this.lastData[s])||this.lastData[s]!==u){if(s in AFRAME.components&&void 0===u)return void f.removeAttribute(s);this.isNamespacedBind?this.updateObj[s]=u:AFRAME.utils.entity.setComponentProperty(f,s,u),this.lastData[s]=u}for(c in this.updateObj);this.isNamespacedBind&&c&&f.setAttribute(this.id,this.updateObj)}},remove:function(){this.system.unsubscribe(this.onStateUpdate)}})}]);