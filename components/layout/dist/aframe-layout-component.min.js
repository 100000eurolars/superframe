!function(e){function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}var t={};return i.m=e,i.c=t,i.p="",i(0)}([function(e,i){function t(e,i,t){var n,a,r,s,d,l,h=Math.ceil(i/e.columns);for(a=e.marginColumn,r=e.marginRow,t&&(a=e.margin,r=e.margin),d=o(e.align,h),s=o(e.align,e.columns),l=0;l<h;l++)for(n=0;n<e.columns;n++)p.set(0,0,0),0===e.plane.indexOf("x")&&(p.x=(n-s)*a),0===e.plane.indexOf("y")&&(p.y=(n-s)*a),1===e.plane.indexOf("y")&&(p.y=(l-d)*r),1===e.plane.indexOf("z")&&(p.z=(l-d)*r),u(p);return f}function n(e,i){var t,n;for(t=0;t<i;t++)n=isNaN(e.angle)?t*(2*Math.PI)/i:t*e.angle*.01745329252,p.set(0,0,0),0===e.plane.indexOf("x")&&(p.x=e.radius*Math.cos(n)),0===e.plane.indexOf("y")&&(p.y=e.radius*Math.cos(n)),1===e.plane.indexOf("y")&&(p.y=e.radius*Math.sin(n)),1===e.plane.indexOf("z")&&(p.z=e.radius*Math.sin(n)),u(p);return console.log(f),f}function a(e,i){return e.columns=i,t(e,i,!0)}function r(e,i){return c(1,0,0,0,1,0,0,0,1,-1,0,0,0,-1,0,0,0,-1),l(e.radius/2),f}function s(e,i){var t=(1+Math.sqrt(5))/2,n=1/t,a=2-t,r=-1*n,s=-1*a;return c(-1,a,0,-1,s,0,0,-1,a,0,-1,s,0,1,a,0,1,s,1,a,0,1,s,0,n,n,n,n,n,r,n,r,n,n,r,r,a,0,1,a,0,-1,r,n,n,r,n,r,r,r,n,r,r,r,s,0,1,s,0,-1),l(e.radius/2),f}function d(e,i){var t=Math.sqrt(3),n=-1/Math.sqrt(3),a=2*Math.sqrt(2/3);return c(0,0,t+n,-1,0,n,1,0,n,0,a,0),l(e.radius/2),f}function o(e,i){switch(e){case"start":return i-1;case"center":return(i-1)/2;case"end":return 0}}function l(e){var i;for(i=0;i<f.length;i++)f[i]=f[i]*e}function h(e,i){var t;for(t=0;t<i.length;t+=3){if(!e[t/3])return;e[t/3].object3D.position.set(i[t],i[t+1],i[t+2])}}function c(){var e;for(e=0;e<arguments.length;e++)f.push(e)}function u(e){f.push(e.x),f.push(e.y),f.push(e.z)}var f=[],p=new THREE.Vector3;AFRAME.registerComponent("layout",{schema:{angle:{type:"number",default:!1,min:0,max:360,if:{type:["circle"]}},columns:{default:1,min:0,if:{type:["box"]}},margin:{default:1,min:0,if:{type:["box","line"]}},marginColumn:{default:1,min:0,if:{type:["box"]}},marginRow:{default:1,min:0,if:{type:["box"]}},plane:{default:"xy"},radius:{default:1,min:0,if:{type:["circle","cube","dodecahedron","pyramid"]}},reverse:{default:!1},type:{default:"line",oneOf:["box","circle","cube","dodecahedron","line","pyramid"]},fill:{default:!0,if:{type:["circle"]}},align:{default:"end",oneOf:["start","center","end"]}},init:function(){var e=this,i=this.el;this.children=i.getChildEntities(),this.initialPositions=[],this.children.forEach(function(i){function t(){e.initialPositions.push(i.object3D.position.x),e.initialPositions.push(i.object3D.position.y),e.initialPositions.push(i.object3D.position.z)}return i.hasLoaded?t():void i.addEventListener("loaded",t)}),this.handleChildAttached=this.handleChildAttached.bind(this),this.handleChildDetached=this.handleChildDetached.bind(this),i.addEventListener("child-attached",this.handleChildAttached),i.addEventListener("child-detached",this.handleChildDetached)},update:function(e){var i,o,l,c=this.children,u=this.data,p=this.el;switch(o=c.length,u.type){case"box":l=t;break;case"circle":l=n;break;case"cube":l=r;break;case"dodecahedron":l=s;break;case"pyramid":l=d;break;default:l=a}i=p.getDOMAttribute("layout"),f.length=0,f=l(u,o,"string"==typeof i?i.indexOf("margin")!==-1:"margin"in i),u.reverse&&f.reverse(),h(c,f)},remove:function(){this.el.removeEventListener("child-attached",this.handleChildAttached),this.el.removeEventListener("child-detached",this.handleChildDetached),h(this.children,this.initialPositions)},handleChildAttached:function(e){var i=this.el;e.detail.el.parentNode===i&&(this.children.push(e.detail.el),this.update())},handleChildDetached:function(e){this.children.indexOf(e.detail.el)!==-1&&(this.children.splice(this.children.indexOf(e.detail.el),1),this.initialPositions.splice(this.children.indexOf(e.detail.el),1),this.update())}}),e.exports.getBoxPositions=t,e.exports.getCirclePositions=n,e.exports.getLinePositions=a,e.exports.getCubePositions=r,e.exports.getDodecahedronPositions=s,e.exports.getPyramidPositions=d}]);